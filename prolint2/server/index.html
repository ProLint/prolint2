<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Wheel App</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <script src="https://cdn.amcharts.com/lib/5/index.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/xy.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/stock.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/radar.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/percent.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/flow.js"></script>

    <link href="https://unpkg.com/tabulator-tables/dist/css/tabulator_simple.min.css" rel="stylesheet" />
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <link rel="stylesheet" type="text/css" href="static/css/pdbe-molstar-3.1.0_vendor.css">

    <style>
        .container {
            width: 1200px;
        }
        #chartdiv {
            height: 700px;
            background-color: white;
        }

        #chartdiv2 {
            height: 250px;
            width: 650px;
            background-color: white;
        }

        #chartdiv3 {
            height: 300px;
            background-color: white;
        }

        #lipid-table {
            height: 300px;
            background-color: white;

        }

        #chartdiv4 {
            height: 300px;
        }

      .msp-plugin ::-webkit-scrollbar-thumb {
          background-color: #474748 !important;
      }
      .viewerSection {
        padding-top: 40px;
      }
      .controlsSection {
        width: 100px;
        height: 100px;
        float: left;
        padding: 40px 0 0 0;
        margin-right: 30px;
      }
      .controlBox {
        border: 1px solid lightgray;
        padding: 10px;
        margin-bottom: 20px;
      }
      #myViewer{
        float:left;
        width:500px;
        height: 700px;
        position:relative;
        /* margin-top: 50px; */
        /* z-index: -1 !important; */
      }

      .tabulator-col-title {
        text-align: center;
      }

    .tabulator-tableholder {
        -ms-overflow-style: none;  /* Internet Explorer 10+ */
        scrollbar-width: none;  /* Firefox */
    }
    .tabulator-tableholder::-webkit-scrollbar {
        display: none;  /* Safari and Chrome */
    }
    .tabulator-col-title {
        font-size: 12px;
    }

    .active {
    background-color: blue;
    color: white;
    }

    .inactive {
    background-color: white;
    color: black;
    }

    </style>
</head>

<body>

    <div class="container">
        <h1>ProLint Dashboard</h1>
        <div class="row">
            <div class="col-sm-6" style="background-color:white;">
                <div id="chartdiv2"></div>
            </div>
        </div>

        <div class="row">
            <div class="col-sm-2" style="background-color:white;">
                <div id="lipid-table"></div>
            </div>
            <div class="col-sm-5" style="background-color: white;">
                <div id="chartdiv3"></div>
            </div>
            <div class="col-sm-5" style="background-color: white;">
                <div id="chartdiv4"></div>
            </div>
        </div>
        <div class="row">
            <div id="chartdiv" class="col-sm-7" style="background-color: white; position: relative;">
              <div id="chartdiv_z" style="width: 100%; height: 100%; position: absolute; padding-top: 30px;"></div>
              <div id="chartdiv_y" style="width: 100%; height: 100%; position: absolute; padding-top: 20px"></div>
              <div id="chartdiv_x" style="width: 100%; height: 100%; position: absolute; padding-top: 15px;"></div>
              <button id="button_x" style="position: absolute; top: 10; left: 45%;" data-app="app_x">Radial App</button>
              <button id="button_y" style="position: absolute; top: 10; right: 0;" data-app="app_y">Shared Contacts</button>
              <button id="button_z" style="position: absolute; top: 10; left: 0;" data-app="app_z">Time Series</button>

            </div>
            <div id="viewerContainer" class="col-sm-4" style="background-color: white;">
                <div id="myViewer" class="col-sm-4" style="background-color: white;"></div>  
            </div>
          </div>
          
        </div>
    </div>

    <script>
        function bringDivToFront(divId, buttonId) {
        // Get the div element and its z-index
        const div = document.getElementById(divId);
        const zIndex = parseInt(div.style.zIndex) || 0;

        // Set the z-index of all the chartdiv divs to the same value
        const chartdivs = document.querySelectorAll("#chartdiv > div");
        chartdivs.forEach((chartdiv) => {
            // chartdiv.style.zIndex = 0;
            // change visibility of the div 
            chartdiv.style.visibility = "hidden";
        });

        // Bring the selected div to the front
        // div.style.zIndex = -100;
        div.style.visibility = "visible";

        // Set the active/inactive classes on the buttons
        const buttons = document.querySelectorAll("#chartdiv button");
        buttons.forEach((button) => {
            if (button.id === buttonId) {
            button.classList.add("active");
            button.classList.remove("inactive");
            // change visibility of the div 
            } else {
            button.classList.remove("active");
            button.classList.add("inactive");
            }
        });

        }

        document.getElementById("button_x").addEventListener("click", function() {
        bringDivToFront("chartdiv_x", "button_x");
        });

        document.getElementById("button_y").addEventListener("click", function() {
        bringDivToFront("chartdiv_y", "button_y");
        });

        document.getElementById("button_z").addEventListener("click", function() {
        bringDivToFront("chartdiv_z", "button_z");
        });

        // bringDivToFront("chartdiv_y", "button_y");
        bringDivToFront("chartdiv_z", "button_z");


    </script>
    <script src="static/js/pdbe-molstar-plugin-3.1.0_vendor.js"></script>
    <script type="module" src="static/js/app.js"></script>

    <script>
        var viewerInstance = new PDBeMolstarPlugin();

    obj = {"abc": 1}
    var options = {
        customData: { url: '/pdb/' + JSON.stringify(obj), format: 'pdb', binary:false },
        hideControls: true,
        // hideCanvasControls: ['selection', 'animation', 'controlToggle'],
        hideCanvasControls: ['animation'],
        // visualStyle: 'molecular-surface'
        // lighting: 'matte',
        }

        //Get element from HTML/Template to place the viewer
        var viewerContainer = document.getElementById('myViewer');

        //Call render method to display the 3D view
        viewerInstance.render(viewerContainer, options);

    </script>

    <script src="static/js/mol.js"></script>


</body>

</html>